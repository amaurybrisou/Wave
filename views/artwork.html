<style type="text/css">
	#info_left, #table {
		-webkit-transition: opacity 1s ease 0.75s, height 1s ease 0.1s, width 0.5s ease 0.5s;/* transition pour Chrome et Safari */
	    -moz-transition: 	opacity 1s ease 0.75s, height 1s ease 0.1s, width 0.5s ease 0.5s;/* transition pour Firefox */
	    -o-transition: 		opacity 1s ease 0.75s, height 1s ease 0.1s, width 0.5s ease 0.5s;/* transition pour Opéra */
	    transition: 		opacity 1s ease 0.75s, height 1s ease 0.1s, width 0.5s ease 0.5s;*/ 
	}

	#info_left {
		height: 50%;
		float: left;
		-moz-border-radius:10px 10px 10px 10px;
		-webkit-border-radius:10px 10px 10px 10px;
		border-radius:10px 10px 10px 10px;

	}

	
	#info_left.fade-in, {
	    opacity: 1; 
	    -ms-filter:"prodig:DXImageTransform.Microsoft.Alpha(Opacity=100)"; 
	    filter: alpha(opacity = 100);
	}
	
	#info_left.size-up {
		width: 20%;
		height: 100%;
	}

	#table.size-up {
		width: 100%;
		height: auto;
		max-height: 90%;
	}
	
	#table {
		border-spacing: 1%;
	}

	#table .list_entry {
		height: 25px;
		margin-bottom: 1%;
		text-align: center;
		line-height: 20px;
		-moz-border-radius:10px 10px 10px 10px;
		-webkit-border-radius:10px 10px 10px 10px;
		border-radius:10px 10px 10px 10px;
	}

	#table .not-selected {
		cursor: auto;
		background-color: rgb(161,166,172);
	}
	#table .selected {
		cursor: pointer;
		background-color: rgba(70,95,91,0.5);
	}

	#info_right, #table .list_entry {
		padding: 2%;

		border: 1px solid rgba(70,95,91,0.5);
	}

	#info_right {
		float: left;
		position: relative;
		margin-left: 1%;
		height: 90%;
		width: 70%;

		/*may be deleted later*/
		min-height: 270px;
		
		-webkit-transition: opacity 0.5s ease-in-out;/* transition pour Chrome et Safari */
	    -moz-transition: 	opacity 0.5s ease-in-out;/* transition pour Firefox */
	    -o-transition: 		opacity 0.5s ease-in-out;/* transition pour Opéra */
	    transition: 		opacity 0.5s ease-in-out;*/ 	
	}


	#table_entry_info {
		/*float: left;
		width: 96%;
		height: auto;*/
		padding: 2%;
		bottom: 5%;
	
	}


	#table_entry_img {
		position: absolute;
		bottom: 5%;
		/*float: left;*/
		width: 94%;
		height: 60%;		
	}

	.info_right_img {
		position: absolute;
		width: 100%;
		height: 100%;
		-webkit-transition: opacity 0.5s ease-in-out;/* transition pour Chrome et Safari */
	    -moz-transition: 	opacity 0.5s ease-in-out;/* transition pour Firefox */
	    -o-transition: 		opacity 0.5s ease-in-out;/* transition pour Opéra */
	    transition: 		opacity 0.5s ease-in-out;*/ 
	}

</style>

<script type="text/javascript">
	(function(){

		ajax();

		function ajax()
		{
		    var xhr;
		 
		    if (window.XMLHttpRequest) { 
		        xhr = new XMLHttpRequest();
		    }
		    else if (window.ActiveXObject) 
		    {
		        xhr = new ActiveXObject("Microsoft.XMLHTTP");
		    }
		    xhr.onreadystatechange = function() { ajax_callback(xhr); };
		 
		    //on appelle le fichier reponse.txt
		    xhr.open("GET", "controllers/list_dir.php", true);
		    xhr.send(null);
		}
		

		
		function ajax_callback(xhr)
		{	
			
			if (xhr.readyState!==4) return;
		    if (xhr.status!==200) return;
			
			var ret_data = JSON.parse(xhr.responseText);
			var entry, attach = $('info_left');
			
			attach.innerHTML += "<div id='table' class='size-down'>";

			attach = $('table');
			var info_right = $('info_right');

			for(var i = 0; i < ret_data.length; i++){
				entry = JSON.parse(ret_data[i]);
				attach.innerHTML += "<div id='table_entry_"+i+"' url='"+entry.url+"' class='list_entry not-selected' content='"+entry.content+"'>"+entry.title+"</div>";
				if(entry.img){
					$('table_entry_'+i).setAttribute('img', i);
				}

				$('table_entry_img').innerHTML += "<img id='table_entry_img_"+i+"'  class='info_right_img fade-out' src='img/"+entry.img+"'/>";
			}

			info_left = $('info_left');
			info_left.innerHTML += "</div>";

			if(fadeIn(info_left) && sizeIn(info_left)){
				
				table = $('table');
				sizeIn(table);

				table_entry_0 = $('table_entry_0');
				selectIn(table_entry_0);

				table_entry_img_0 = $('table_entry_img_0');
				fadeIn(table_entry_img_0);

				$('table_entry_info').innerHTML = JSON.parse(ret_data[0]).content;

				fadeIn(info_right);
			}

			var table_entry_img, old_target = undefined;
			$('table').onmouseover = function(e){
				if (e == null) e = window.event;
				target = e.target != null ? e.target : e.srcElement;

				if(target.id === "table") return;

				if(old_target !== undefined && table_entry_img !== undefined){ 
					selectOut(old_target); 
					fadeOut(table_entry_img);
				}


				table_entry_img = $('table_entry_img_'+target.getAttribute('img'));
				fadeIn(table_entry_img);

				selectIn(target);


				$('table_entry_info').innerHTML = target.getAttribute('content');

				old_target = target;
		
			}


			$('table').onmousedown = function(e){
				if (e == null) e = window.event;
				var target = e.target != null ? e.target : e.srcElement;	
				
				window.open(target.getAttribute("url"), "_blank", false);
			}
		}

		
	}());
</script>

