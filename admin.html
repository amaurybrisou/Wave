<html>
<head>
	<script type="text/javascript" src="lib/tinymce/tinymce.min.js"></script>
	<script type="text/javascript">
	tinymce.init({
	    selector: "textarea",
	    browser_spellcheck : true,
	    plugins : 'advlist save autolink link image lists charmap print preview textcolor',	    
	    toolbar: "save",
	    save_enablewhendirty: true,
	    save_onsavecallback: function(d) {console.log("Save");}

	 });


	window.onload = function(){

	  var btn = document.getElementById('mce_11');

	  btn.onclick = function(){

	  	var filename = prompt("Filename :", "Texte par d√©faut");

	  	console.log(tinyMCE.activeEditor.getContent());

	    var xmlhttp;
		if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
		    xmlhttp=new XMLHttpRequest();
		}
		else {// code for IE6, IE5
			xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
		}

		xmlhttp.open('POST', "controllers/controller.php", true);

		var params = "content="+tinyMCE.activeEditor.getContent()+"&filename="+filename;
		//Send the proper header information along with the request
		xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		xmlhttp.setRequestHeader("Content-length", params.length);
		xmlhttp.setRequestHeader("Connection", "close");

		xmlhttp.onreadystatechange = function() {//Call a function when the state changes.
			if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
				alert(xmlhttp.responseText);
			}
		}
		xmlhttp.send(params);
	  }
	}

	function $(id){return document.getElementById(id);}
	</script>
	<style media="screen" type="text/css">

	#text_area {
		margin: 0;
		height:80%;
		width: 100%;
	}
	</style>
</head>
<body>
<textarea id="text_area"></textarea>
</body>
</html>